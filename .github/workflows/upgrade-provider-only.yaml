env:
  GH_TOKEN: ${{ secrets.MACHINE_USER_TOKEN }}
jobs:
  upgrade_provider:
    name: upgrade-provider
    runs-on: ubuntu-latest
    steps:
    - name: Setup mise
      uses: jdx/mise-action@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        cache_key: "mise-{{platform}}-{{file_hash}}"
        # only saving the cache in the prerequisites job
        cache_save: false
    - name: Call upgrade provider action
      uses: pulumi/pulumi-upgrade-provider-action@819d5a53c48d0c7ddd67acbc82eb220b342084eb # v0.0.16
      with:
        kind: provider
        email: getport.io
        username: pulumi-port-bot
name: Upgrade the TF provider only

permissions:
  contents: write

on:
  workflow_dispatch: {}
